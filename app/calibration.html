<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Liquid Handler Planner</title>
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">

    <!-- Bootstrap -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Load imagemapster script -->
    <script src="{{url_for('static', filename='js/jquery.imagemapster.js')}}" type="text/javascript"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <!-- <script src="/static/js/bootstrap.min.js"></script> -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <!-- JSON Refresh Javascript -->
    <script type="text/javascript">
        function refreshCalib() {
            //alert("Calling refresh...");
            $.ajax({
                url: "/calibration/refreshCalib",
                type: "GET",
                dataType: "json",
                success: function (data) {
                    //alert("Refresh called. Result="+data.result);
                    $("#coordX").html(data.coordX);
                    $("#coordY").html(data.coordY);
                    $("#coordZ").html(data.coordZ);
                    $("#tipX").html(data.tipX);
                    $("#tipY").html(data.tipY);
                    $("#tipZ").html(data.tipZ);
                    $("#sampleX").html(data.sampleX);
                    $("#sampleY").html(data.sampleY);
                    $("#sampleZ").html(data.sampleZ);
                    $("#returnX").html(data.returnX);
                    $("#returnY").html(data.returnY);
                    $("#returnZ").html(data.returnZ);
                    $("#wasteTX").html(data.wasteTX);
                    $("#wasteTY").html(data.wasteTY);
                    $("#wasteTZ").html(data.wasteTZ);
                    $("#wasteLX").html(data.wasteLX);
                    $("#wasteLY").html(data.wasteLY);
                    $("#wasteLZ").html(data.wasteLZ);
                    $("#reserveX").html(data.reserveX);
                    $("#reserveY").html(data.reserveY);
                    $("#reserveZ").html(data.reserveZ);
                    $("#slideX").html(data.slideX);
                    $("#slideY").html(data.slideY);
                    $("#slideZ").html(data.slideZ);
                    setTimeout(refreshCalib, 1000);
                },
                error: function (xhr, status, err) {
                    alert("Error: " + err);
                }
            });
        }

        $(document).ready(function () {
            //$("#refresh").click(function(event) {
            //$("#Home").click(function(event){
            refreshCalib();
            //});
        });
    </script>

    <script>
        function activeTabf() {
            var activeTab = $('.nav-tabs .active').text()
            $.ajax({
                type: 'POST',
                url: "/calibration/activeTab",
                dataType: "text",
                data: { activeTab: activeTab },
                complete: setTimeout(function () { activeTabf() }, 2000),
                timeout: 1000
            });
        }

        $(document).ready(function () {
            activeTabf();
            //});
        });
    </script>


</head>

<body>
    <div class="jumbotron text-center">
        <h1>Calibration</h1>
    </div>
</body>

<nav class="navbar navbar-default">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>                        
      </button>
            <a class="glyphicon glyphicon-home" href="/main" style="color:#FFFFFF"></a>
        </div>
        <div class="collapse navbar-collapse" id="myNavbar">
            <ul class="nav navbar-nav">
                <li><a href="/instructions">Instructions</a></li>
                <li><a href="/calibration">Calibration</a></li>
            </ul>
        </div>
    </div>
</nav>

<body>
    <div class="text-center">
        <h2>Initial Instructions</h2>
        <p>Ensure that the machine is homed prior to calibration and that the current position readout is zeroed.<br> Attach
            the tips onto the pipette. Do <b>NOT</b> use excessive force pushing the tips in.<br> Position the pipette to
            the following locations:</p>
    </div>
</body>

<body>
    <div class="text-center">
        <!-- Information Text Box -->
        <h4>
            X Coordinate = <span id="coordX">{{ coordX }} </span></a>
            <br>Y Coordinate = <span id="coordY">{{ coordY }}</span></a>
            <br>Z Coordinate = <span id="coordZ">{{ coordZ }} </span></a>
        </h4>
    </div>
</body>
<body>
    <div class="text-center">
        <div class="btn-group">
            <a href="/calibration/Home" class="btn btn-danger" role="button">Home</a>
            <a href="/calibration/Left" class="btn btn-danger" role="button">Left</a>
            <a href="/calibration/Right" class="btn btn-danger" role="button">Right</a>
            <a href="/calibration/Forward" class="btn btn-danger" role="button">Forward</a>
            <a href="/calibration/Backward" class="btn btn-danger" role="button">Backward</a>
            <a href="/calibration/Up" class="btn btn-danger" role="button">Up</a>
            <a href="/calibration/Down" class="btn btn-danger" role="button">Down</a>
        </div>
    </div>
</body>

<body>
<ul class="nav nav-tabs">
    <li class="active"><a href="#tipbox" data-toggle="tab" aria-expanded="true">Tip Box</a></li>
    <li class=""><a href="#samplerack" data-toggle="tab" aria-expanded="false">Sample Rack</a></li>
    <li class=""><a href="#returnrack" data-toggle="tab" aria-expanded="false">Return Rack</a></li>
    <li class=""><a href="#tipwaste" data-toggle="tab" aria-expanded="false">Waste Tip</a></li>
    <li class=""><a href="#liquidwaste" data-toggle="tab" aria-expanded="false">Waste Liquid</a></li>
    <li class=""><a href="#reagentreservoir" data-toggle="tab" aria-expanded="false">Reagent Reservoir</a></li>
    <li class=""><a href="#slidetray" data-toggle="tab" aria-expanded="false">Slide Tray</a></li>
</ul>
<div id="myTabContent" class="tab-content">
    <div class="tab-pane fade" id="tipbox">
        <div class="text-center">
            <!-- Information Text Box -->
            <h4>
                Saved X Coordinate = <span id="tipX">{{ tipX }} </span></a>
                <br>Saved Y Coordinate = <span id="tipY">{{ tipY }}</span></a>
                <br>Saved Z Coordinate = <span id="tipZ">{{ tipZ }} </span></a><br><br>
            </h4>
        </div>
    </div>
    <div class="tab-pane fade" id="samplerack">
        <div class="text-center">
            <!-- Information Text Box -->
            <h4>
                Saved X Coordinate = <span id="sampleX">{{ sampleX }} </span></a>
                <br>Saved Y Coordinate = <span id="sampleY">{{ sampleY }}</span></a>
                <br>Saved Z Coordinate = <span id="sampleZ">{{ sampleZ }} </span></a><br><br>
            </h4>
        </div>
    </div>
    <div class="tab-pane fade" id="returnrack">
        <div class="text-center">
            <!-- Information Text Box -->
            <h4>
                Saved X Coordinate = <span id="returnX">{{ returnX }} </span></a>
                <br>Saved Y Coordinate = <span id="returnY">{{ returnY }}</span></a>
                <br>Saved Z Coordinate = <span id="returnZ">{{ returnZ }} </span></a><br><br>
            </h4>
        </div>
    </div>
    <div class="tab-pane fade" id="tipwaste">
        <div class="text-center">
            <!-- Information Text Box -->
            <h4>
                Saved X Coordinate = <span id="wasteTX">{{ wasteTX }} </span></a>
                <br>Saved Y Coordinate = <span id="wasteTY">{{ wasteTY }}</span></a>
                <br>Saved Z Coordinate = <span id="wasteTZ">{{ wasteTZ }} </span></a><br><br>
            </h4>
        </div>
    </div>
    <div class="tab-pane fade" id="liquidwaste">
        <div class="text-center">
            <!-- Information Text Box -->
            <h4>
                Saved X Coordinate = <span id="wasteLX">{{ wasteLX }} </span></a>
                <br>Saved Y Coordinate = <span id="wasteLY">{{ wasteLY }}</span></a>
                <br>Saved Z Coordinate = <span id="wasteLZ">{{ wasteLZ }} </span></a><br><br>
            </h4>
        </div>
    </div>
    <div class="tab-pane fade" id="reagentreservoir">
        <div class="text-center">
            <!-- Information Text Box -->
            <h4>
                Saved X Coordinate = <span id="reserveX">{{ reserveX }} </span></a>
                <br>Saved Y Coordinate = <span id="reserveY">{{ reserveY }}</span></a>
                <br>Saved Z Coordinate = <span id="reserveZ">{{ reserveZ }} </span></a><br><br>
            </h4>
        </div>
    </div>
    <div class="tab-pane fade" id="slidetray">
        <div class="text-center">
            <!-- Information Text Box -->
            <h4>
                Saved X Coordinate = <span id="slideX">{{ slideX }} </span></a>
                <br>Saved Y Coordinate = <span id="slideY">{{ slideY }}</span></a>
                <br>Saved Z Coordinate = <span id="slideZ">{{ slideZ }} </span></a><br><br>
            </h4>
        </div>
    </div>
</div>
</body>


<!-- Form for Go To XYZ Position -->
<form class="form-horizontal" action="/calibration/postCoord" method="POST">
    <fieldset>
        <legend>Go To</legend>
        <div class="form-group col-xs-6">
            <label for="X" class="col-xs-12 control-label" style = "text-align:left">X</label>
            <div class="col-xs-12">
                <input type="text" class="form-control" name="postX" placeholder="X Coordinate">
            </div>

            <label for="Y" class="col-xs-12 control-label" style = "text-align:left">Y</label>
            <div class="col-xs-12">
                <input type="text" class="form-control" name="postY" placeholder="Y Coordinate">
            </div>

            <label for="Z" class="col-xs-12 control-label" style = "text-align:left">Z</label>
            <div class="col-xs-12">
                <input type="text" class="form-control" name="postZ" placeholder="Z Coordinate">
            </div>

            <label for="F" class="col-xs-12 control-label" style = "text-align:left">Speed</label>
            <div class="col-xs-12">
                <input type="text" class="form-control" name="postF" placeholder="F Coordinate">
            </div>
        </div>

        <div class="form-group col-xs-6" style = "float: right ;top:10px">
            <div class="col-xs-12" style= "padding-top:2px">
                <button type="submit" name="postCoord" class="btn btn-primary" value = "save">Save Coordinates</button>
            </div>
            <div class="col-xs-12" style= "padding-top:2px">
                <button type="submit" name="postCoord" class="btn btn-primary" value = "submit">Submit</button>
            </div>
            <div class="col-xs-12" style= "padding-top:2px">
                <button type="reset" class="btn btn-default">Cancel</button>         
            </div>
            </div>
        </div>
    </fieldset>
</form>

<form class="form-horizontal" action="/calibration/saveCoord" method="POST">
    <input type="hidden" name="newCoord" value="{{ tipX }}" />
    
</form>

<footer class="jumbotron text-center" style="padding-bottom:10px; padding-top:10px;">
    <div class="row">
        <div class="text-center">
            <a href="http://www.pictordx.com" target="_blank"><img src="{{url_for('static', filename='img/logo.png')}}" / style="width:20%;height:20%;"></a>
        </div>
        <div class="col-sm-4">
            <br>24 Balfour Road<br> Parnell, Auckland 1052<br> New Zealand</li>
        </div>
        <div class="col-sm-4">
            <br>E: info@pictordx.com<br>T: +64 9 309 0950
        </div>
        <div class="col-sm-4 text-danger">
            <br></b>ISO 9001:2008 Certified</b><br>ISO 13485 Certified
        </div>
    </div>
</footer>

</html>